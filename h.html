<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Three.js Background</title>
  <style>
    /* Make sure body and html take full height */
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden; /* no scroll */
      height: 100%;
      width: 100%;
    }

    /* Canvas fills the screen behind content */
    #bg-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1; /* behind everything */
      display: block;
    }

    /* Your page content goes here */
    .content {
      position: relative;
      z-index: 1; /* in front of canvas */
      color: white;
      padding: 20px;
      font-family: sans-serif;
    }
  </style>
</head>
<body>

  <div class="content">
    <h1>My Page with Three.js Background</h1>
    <p>This content is above the animated background.</p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.min.js"></script>
  <script>
    var scene = new THREE.Scene();

var camera = new THREE.PerspectiveCamera(
  45,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.set(0, 0, 150);

var renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setClearColor(0x000000, 0); // transparent background
renderer.domElement.id = 'bg-canvas';
document.body.appendChild(renderer.domElement);

var texture = (function () {
  var w = 16,
    h = 16;
  var canvas = document.createElement('canvas');
  canvas.width = w;
  canvas.height = h;
  var context = canvas.getContext('2d');
  var gradient = context.createRadialGradient(w / 2, h / 2, 0, w / 2, h / 2, w / 2);
  gradient.addColorStop(0, '#ffffff');
  gradient.addColorStop(0.2, '#00ffff');
  gradient.addColorStop(0.4, '#000040');
  gradient.addColorStop(1, '#000000');
  context.fillStyle = gradient;
  context.fillRect(0, 0, w, h);
  var texture = new THREE.Texture(canvas);
  texture.needsUpdate = true;
  return texture;
})();

var params = {
  radius: 100,
  tube: 40,
  radialSegments: 512,
  tubularSegments: 64,
  p: 2, // shape
  q: 3, // shape
  heightScale: 1,
};

var geometry = new THREE.TorusKnotGeometry(
  params.radius,
  params.tube,
  params.radialSegments,
  params.tubularSegments,
  params.p,
  params.q,
  params.heightScale
);

var material = new THREE.PointsMaterial({
  color: 0xffffff,
  size: 3,
  transparent: true,
  map: texture,
  blending: THREE.AdditiveBlending,
  side: THREE.DoubleSide,
});

var pointCloud = new THREE.Points(geometry, material);
scene.add(pointCloud);

var step = 0;
function render() {
  requestAnimationFrame(render);
  step += 0.01;
  pointCloud.rotation.x = step;
  pointCloud.rotation.z = step;
  renderer.render(scene, camera);
}

function resize() {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
}

window.addEventListener('resize', resize);

resize();
render();

  </script>
  
</body>
</html>
